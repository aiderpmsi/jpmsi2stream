<?xml version="1.0"?>

<scxml xmlns="http://www.w3.org/2005/07/scxml"
       xmlns:my="http://my.custom-actions.domain/CUSTOM"
       version="1.0"
       initial="test_header">

	<datamodel>
   		<data name="line" expr="0" />
	</datamodel>

    <state id="test_header">
   
   		<datamodel>
    		<data name="isrsf2012h" expr="false" />
		</datamodel>
   
    	<onentry>
    		<my:lineinvocator linename="_line_rsf2012header" varname="isrsf2012h" />

    		 <if cond="isrsf2012h">
    		    <my:linewriter linename="_line_rsf2012header" />
                <send event="'rsf2012h'" />
                <else />
                <send event="'none'" />
             </if>
    	</onentry>
    	
    	<onexit>
    		<my:print content="" newline="true" />
    	</onexit>
    	
    	<transition event="rsf2012h" target="rsf2012h" />
    	<transition event="none" target="headernotfound" />

    </state>
    	
	<state id="rsf2012h">
	
		<initial>
       		<transition target="rsf2012h.entry"/>
        </initial>
	
		<state id="rsf2012h.entry">
	
	   		<datamodel>
    			<data name="isrsf2012a" expr="false" />
    			<data name="isrsf2012b" expr="false" />
    			<data name="isrsf2012c" expr="false" />
    			<data name="isrsf2012h" expr="false" />
    			<data name="isrsf2012l" expr="false" />
    			<data name="isrsf2012m" expr="false" />
    			<data name="iseof" expr="false" />
			</datamodel>

			<onentry>
				<my:lineinvocator linename="_line_rsf2012a" varname="isrsf2012a"/>
				<my:lineinvocator linename="_line_rsf2012b" varname="isrsf2012b"/>
				<my:lineinvocator linename="_line_rsf2012c" varname="isrsf2012c"/>
				<my:lineinvocator linename="_line_rsf2012h" varname="isrsf2012h"/>
				<my:lineinvocator linename="_line_rsf2012l" varname="isrsf2012l"/>
				<my:lineinvocator linename="_line_rsf2012m" varname="isrsf2012m"/>
				<my:lineinvocator linename="_line_eof" varname="iseof"/>

				<if cond="isrsf2012a">
    				<my:linewriter linename="_line_rsf2012a" />
		    		<my:print content="" newline="true" />
       	   		    <send event="'rsf2012a'" />
       	        <elseif cond="isrsf2012b" />
 					<my:linewriter linename="_line_rsf2012b" />
		    		<my:print content="" newline="true" />
       	         	<send event="'rsf2012b'" />
             	<elseif cond="isrsf2012c" />
    		    	<my:linewriter linename="_line_rsf2012c" />
		    		<my:print content="" newline="true" />
                	<send event="'rsf2012c'" />
             	<elseif cond="isrsf2012h" />
    		    	<my:linewriter linename="_line_rsf2012h" />
		    		<my:print content="" newline="true" />
                	<send event="'rsf2012h'" />
             	<elseif cond="isrsf2012l" />
    		    	<my:linewriter linename="_line_rsf2012l" />
		    		<my:print content="" newline="true" />
                	<send event="'rsf2012l'" />
             	<elseif cond="isrsf2012m" />
    		    	<my:linewriter linename="_line_rsf2012m" />
		    		<my:print content="" newline="true" />
                	<send event="'rsf2012m'" />
             	<elseif cond="iseof" />
    		    	<my:linewriter linename="_line_eof" />
		    		<my:print content="" newline="true" />
                	<send event="'eof'" />
             	<else />
                	<send event="'none'" />
             	</if>
			</onentry>
	
    		<transition event="rsf2012a" target="rsf2012h.entry" />
    		<transition event="rsf2012b" target="rsf2012h.entry" />
    	 	<transition event="rsf2012c" target="rsf2012h.entry" />
    		<transition event="rsf2012h" target="rsf2012h.entry" />
    		<transition event="rsf2012l" target="rsf2012h.entry" />
    		<transition event="rsf2012m" target="rsf2012h.entry" />
    		<transition event="eof" target="eof" />
    		<transition event="none" target="linenotknown" />
		</state>
	</state>

    <state id="headernotfound" final="true" />
    <state id="linenotknown" final="true" />
    <state id="eof" final="true" />

</scxml>